
事务层是 PCIe 总线层次结构的最高层该层次将接收 PCIe 设备核心层的数据请求并将其转换为 PCIe 总线事务 PCIe 总线使用的这些总线事务在 TLP 头中定义. PCIe 总线继承了 PCI/PCI-X 总线的大多数总线事务如存储器读写、I/O 读写、配置读写总线事务并增加了 Message 总线事务和原子操作等总线事务.

本节重点介绍与数据传送密切相关的总线事务如存储器、I/O、配置读写总线事务. 在 PCIe 总线中 Non-Posted 总线事务分两部分进行首先是发送端向接收端提交总线读写请求之后接收端再向发送端发送完成(Completion)报文. PCIe 总线使用 Split 传送方式处理所有 Non-Posted 总线事务存储器读、I/O 读写和配置读写这些 Non-Posted 总线事务都使用 Split 传送方式. PCIe 的事务层还支持流量控制和虚通路管理等一系列特性而 PCI 总线并不支持这些新的特性.

在 PCIe 总线中不同的总线事务采用的路由方式不相同. PCIe 总线继承了 PCI 总线的地址路由和 ID 路由方式并添加了"隐式路由"方式.

PCIe 总线使用的数据报文首先在事务层中形成这个数据报文也被称之为事务层数据报文即 TLPTLP 在经过数据链路层时被加上 Sequence Number 前缀和 CRC 后缀然后发向物理层.

数据链路层还可以产生 DLLP(`Data Link Layer Packet`). DLLP 和 TLP 没有直接关系 DLLP 是产生于数据链路层终止于数据链路层并不会传递到事务层. DLLP 不是 TLP 加上前缀和后缀形成的. 数据链路层的报文 DLLP 通过物理层时需要经过 8/10b 编码然后再进行发送. 数据的接收过程是发送过程的逆过程但是在具体实现上接收过程与发送过程并不完全相同.
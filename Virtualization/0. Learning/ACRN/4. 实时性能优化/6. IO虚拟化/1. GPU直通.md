
这里讨论的GPU主要是Intel平台上和CPU在一起的集成GPU，其中某些方法也适用于独立GPU。在嵌入式虚拟化系统的工业应用场景里，GPU通常用于HMI VM的显示，Intel平台早期实现了基于GVT-g的共享GPU虚拟化方案，可以用于支持多VM、多屏幕的显示。在工业场景中，因为通常只需要HMI VM有显示输出，所以可以把GPU直通给HMI，以提高性能并减少VM间的干扰，如图7-17所示。



GPU直通是嵌入式虚拟化在工业场景上的常用方法，主要用来满足HMI需求，同时尽量减少对实时性的影响。

由于集成GPU和CPU共享了一部分硬件资源，如LLC、系统总线等，GPU的工作负载很可能会对RTVM的实时性有一些影响，即便配置了CPU CAT和GT CAT（GPU的CAT）​，也难以消除这些影响。另外，在调优的过程中如果GPU主频较高、负载较重，有可能触发硬件温度控制模块，导致CPU出现降频的情况，从而影响系统的实时性。

综上所述，在Intel平台上，GPU直通的好处如下。

* 减少了对服务虚拟机的干扰，GPU运行时不会占用服务虚拟机的CPU使用率。

* 提升了GPU的工作效率，用较低的频率完成相应的功能，尽量不影响用户体验。

* GPU和CPU共享LLC，降低GPU的主频可以减少对实时核的干扰。

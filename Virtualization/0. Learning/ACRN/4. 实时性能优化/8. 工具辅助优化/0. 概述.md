
在嵌入式虚拟化系统中, 除了从理论上对 VMM 和 RTVM 进行分析, 结合硬件相关的一些优化外, 我们也可以借助一些通用工具来进行性能和实时性优化.

目前有很多工具可以用来对应用程序进行调优, 如 VTune,Perf 等, 这些工具也可以用于嵌入式虚拟化实时系统的性能调优. 因为这些工具并没有为虚拟化环境的运行进行特殊定制, 所以如果需要进行虚拟化环境的细粒度调优, 需要抓取与虚拟机相关的数据进行分析, 则这些工具将无能为力. 在虚拟化实时系统中, 性能调优需要特别关注的一个性能调试参数就是 VM Exit 的数据. 因为如果 RTVM 里的实时 CPU 核上有较多的 VM Exit 产生, 就会带来较大的不确定性. 因此在 RTVM 里的实时任务运行的过程中, 可以在 ACRN 里抓取相关的调试数据来确定该 CPU 核是否有意外的 VM Exit 产生. 下面结合 ACRN 虚拟机来举例说明.


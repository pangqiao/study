
本节将主要概述嵌入式功能安全领域相关背景, 面临的挑战, 以及虚拟化技术在保证嵌入式功能安全系统的正确性和实时性方面的相关优势.

随着信息技术的飞速发展, 嵌入式系统正在以前所未有的速度渗透到人类生活的方方面面. 调查数据表明, 目前世界上超过 98% 的微处理器都用于嵌入式系统. 随着物联网的蓬勃发展, 嵌入式系统的地位将进一步提升. 嵌入式系统往往应用于过程控制, 环境控制, 关键基础设施控制系统等领域. 这类系统本质上是复杂实时系统, 系统的正确性不仅取决于逻辑计算结果, 更取决于结果生成的时间, 即系统必须在规定的时间范围内正确地响应外部物理过程的变化. 如果系统的功能行为或时间行为不能满足要求, 则可能导致灾难性后果. 因此, 嵌入式功能安全所涉及的安全设计, 安全机制和安全流程, 对保证系统高可靠性尤为关键.

同时, 应用需求的提升导致嵌入式系统日益复杂, 集成度不断提高. 传统的嵌入式设计方法通常将不同的应用 (或功能) 部署到不同的独立硬件上执行. 而对于高度复杂的嵌入式系统, 这一方法学已经无法满足开发效率的需要, 同时更难以满足嵌入式系统对性能, 体积, 重量以及功耗等方面的需求. 因此, 实时系统将面临实时性约束和高性能集成设计需求的双重压力. 多核处理器的出现, 使得在同一平台上集成多个应用成为可能. 例如, 在汽车电子领域中, 一台高端汽车上有超过 200 个电子控制单元(Electronic Control Unit,ECU), 一个 ECU 负责一个特定的功能(如加速, 制动等)​. 在系统设计中, 多个控制功能会被集成在一个多核处理器上, 从而降低系统开发和维护成本, 减小电子系统的体积与功耗. 因此, 多核处理器成为各类计算系统的标准硬件, 实时系统在多核硬件上的集成也将成为必然趋势.

尽管多核处理器可以为实时系统带来诸多的好处, 但是多核处理器在体系结构和系统管理上有不同于单核处理器的固有特性, 在多核平台上高效地设计和部署实时系统仍然面临着一些挑战. 到目前为止, 面向可认证 (certifiable) 高可信实时系统的软件设计大多仍然停留在单核系统上. 例如, 当调度安全关键任务时, 航空系统设计者往往会关掉其他 CPU 核, 只留一个 CPU 核运行安全关键任务, 以保证其安全性. 这种保守的使用方式往往使多核平台的高性能优势难以得到充分的体现和发挥. 如何高效地将多核计算平台应用于实时系统设计中, 在国内外工业界和学术界仍然是一个开放性的研究问题.

在实时多核系统设计中, 为了避免系统资源的干扰, 往往使用物理隔离技术对系统资源进行隔离. 虚拟化技术可以将不同安全等级功能的子系统部署, 运行在同一硬件平台上, 为系统隔离和资源管理提供了一种更加灵活的方法. 对于虚拟机而言, 虚拟机监控器 (Hypervisor) 负责管理虚拟机并屏蔽了底层硬件的实现细节, 采用灵活的策略将底层硬件资源有效地分配给虚拟机, 从而满足各个虚拟机对资源的需求. 对于实时多核系统而言, 虚拟化技术能够很好地满足实时多核系统设计中的一些迫切需求.

* 可移植性(portability): 能够很容易地将软件部署在硬件上.

* 可隔离性(isolation): 可以实现不同安全等级的系统的安全隔离.

* 可集成性(composition): 能够很容易地将新的应用集成到目前的平台上, 易于实现增量化设计(compositional design).

* 传统软件的兼容性(legacy code compatibility): 芯片厂商在推出一个新的多核芯片时, 需要考虑传统软件的兼容性问题. 虚拟化技术可以很好地解决这一问题, 在新的硬件平台上隔离出一个虚拟环境, 用于运行旧的传统软件.

为了保证整个基于虚拟化实时多核系统的功能正确性和实时性, 需要虚拟机监控器提供正确的安全隔离, 底层硬件管理和虚拟机管理.

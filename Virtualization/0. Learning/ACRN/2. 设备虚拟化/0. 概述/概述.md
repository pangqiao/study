
本章介绍了 ACRN 中的设备虚拟化, 主要包括设备直通和设备模拟. 其中, 设备模拟又分为全虚拟化设备和半虚拟化设备. 设备直通是直接将物理设备直通给客户机使用, 客户机使用和物理机相同的驱动. 设备直通具有更好的性能, 但缺乏在设备共享和系统扩展方面的优势. 设备模拟在性能上一般不如设备直通, 但却具有更好的共享与灵活性. 就设备模拟而言, 一般半虚拟化设备与同类型的全虚拟化设备相比具有更好的性能, 这是通过软件定义设备的方式减少 VM Exit 来实现的. 5.2 节介绍了 PS/2 控制器, UART 串口, USB 设备, AHCI 控制器, 系统时钟, 看门狗设备, Ivshmem, 显卡设备的原理与实现; 5.3 节介绍了 ACRN 支持的 virtio-net,virtio-blk,virtio-input,virtio-console,virtio-i2c,virtio-gpio,virtio-rnd,virtio-gpu 等设备的原理与实现. 通过学习本章, 希望读者能对 ACRN 设备虚拟化有大致的了解, 对设备虚拟化研发感兴趣的读者可以结合本章各节列出的 ACRN 官方源代码进行更加深入的探索; 对 ACRN 应用感兴趣的读者, 可以结合本章内容根据自身项目需要灵活配置相应的虚拟设备.